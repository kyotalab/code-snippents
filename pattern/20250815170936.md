---
id: 20250815170936
title: エラーラッピング戦略
type: pattern
tags: [error-handling, go, error-wraping, context-preservation, debugging]
created: 2025-08-15 17:09:36
updated: 2025-08-15 17:15:25
---

## エラーラッピング戦略

### Core Concept

各層でエラーを適切にラップし、コンテキスト情報を付与しながら上位層に伝播させる。

---

### 実装パターン

```go
// アプリケーション層でのラッピング
func WrapDomainError(err error, operation string) ApplicationError {
    return ApplicationError{
        Code:    "DOMAIN_RULE_VIOLATION",
        Message: fmt.Sprintf("ビジネスルール違反 (%s)", operation),
        Cause:   err,
    }
}
```

### Goでの実装

- `Unwrap() error` メソッドの実装
- `errors.As()` でのエラー型判定
- `errors.Is()` でのエラー比較

---

### 利点

- 根本原因の追跡可能性
- 層ごとの適切なエラーハンドリング
- デバッグ情報の保持

---

### Related Notes

- [層別エラー設計パターン](./20250815170343.md)
