---
id: 20250815222652
title: エンティティファクトリ vs ドメインサービス
type: pattern
tags:
  [
    factory-pattern,
    domain-service,
    ddd,
    entity-creation,
    complexity-management,
    yagni,
  ]
created: 2025-08-15 22:26:52
updated: 2025-08-15 22:34:14
---

## エンティティファクトリ vs ドメインサービス

### Core Concept

作成ロジックの複雑性に応じて、適切なパターンを選択する

---

### 判断基準

#### エンティティファクトリ（コンストラクタ関数）

- シンプルなバリデーション
- 基本的なフィールド設定
- 他エンティティとの協調なし

```go
func NewTodo(title string, priority Priority, projects, contexts []string) (*Todo, error) {
    if strings.TrimSpace(title) == "" {
        return nil, ErrEmptyTitle
    }
    return &Todo{...}, nil
}
```

#### ドメインサービス

- 複雑なビジネスルール
- 複数エンティティとの強調
- 外部データとの整合性チェック

```go
func (s *TodoService) CreateTodoWithValidation(title string, existing []Todo) (*Todo, error) {
    if err := s.validateDuplicateTitle(title, existing); err != nil {
        return nil, err
    }
    return NewTodo(title, priority, projects, contexts)
}
```

### 原則

**YAGNI（You Aren't Gonna Need It）** に従い、現在の複雑性に応じた適切なパターンを選択

---

### Related Notes

- [DDDにおける依存関係の方向性原則](../concept/20250815165748.md)
- [ドメインエラーの設計原則](../concept/20250815223433.md)
