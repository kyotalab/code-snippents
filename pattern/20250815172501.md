---
id: 20250815172501
title: Repositoryパターンの実装
type: pattern
tags: [reporitory-pattern, ddd, persistence, abstraction, go, testing]
created: 2025-08-15 17:25:01
updated: 2025-08-15 17:29:55
---

## Repositoryパターンの実装

### Core Concept

ドメイン層でインターフェースを定義し、インフラ層で実装することで、永続化の詳細をドメインから分離する。

---

### ドメイン層でのインターフェース定義

```go
// domain/repository.go
type TodoRepository interface {
    Save(todo *Todo) error
    FindAll() ([]Todo, error)
    FindById(id int) (*Todo, error)
}
```

### インフラ層での実装

```go
// infrastructure/file_todo_repository.go
type FileTodoRepository struct {
    path string
}

func (r *FileTodoRepository) Save(todo *domain.Todo) error {
    // ファイルシステムへの永続化実装
}
```

---

### 利点

- テストでのモック化が容易
- 永続化方式の変更への対応
- ドメインロジックの独立性

---

### Related Notes

- [DDDにおける依存関係の方向性原則](../concept/20250815165748.md)
- [Dependency Injection in Go](./20250815173055.md)
