---
id: 20250807103113
title: Go vs Rust ファイル読み込み比較
type: syntax
tags: [go, rust, file-io, error-handling]
created: 2025-08-07 10:31:13
updated: 2025-08-07 10:33:16
---

## Go vs Rust ファイル読み込み比較

### 基本構造の比較

#### パッケージ/クレート宣言

| Go             | Rust                         |
| -------------- | ---------------------------- |
| `package main` | `// Cargoプロジェクトで自動` |
| `import (...)` | `use std::{...};`            |

#### エラーハンドリング哲学

| 項目           | Go                             | Rust                 |
| -------------- | ------------------------------ | -------------------- |
| **基本思想**   | 明示的なエラー値返却           | 型システムによる強制 |
| **戻り値**     | `(T, error)`                   | `Result<T, E>`       |
| **エラー伝播** | `if err != nil { return err }` | `?` 演算子           |

---

### 詳細比較

#### 1. 関数シグネチャ

```go
// Go: 複数戻り値でエラーを表現
func reader(path string) (string, error)
```

```rust
// Rust: Result型でエラーを表現
fn reader(path: &Path) -> Result<String, Box<dyn Error>>
```

#### 2. エラーハンドリングパターン

```go
// Go: 明示的チェック
content, err := os.ReadFile(path)
if err != nil {
    return "", fmt.Errorf("failed: %w", err)
}
```

```rust
// Rust: ? 演算子で簡潔に
let content = fs::read_to_string(path)
    .map_err(|err| format!("failed: {}", err))?;
```

#### 3. メイン関数でのエラーハンドリング

```go
// Go: エラーをログ出力して終了
func main() {
    res, err := reader(path)
    if err != nil {
        log.Fatalf("Error: %v", err)
    }
    // 処理続行
}
```

```rust
// Rust: Result型を返してシステムに委任
fn main() -> Result<(), Box<dyn Error>> {
    let res = reader(path)?;
    // 処理続行
    Ok(())
}
```

---

### パフォーマンス・メモリ特性

#### メモリ管理

- **Go**: ガベージコレクション、ヒープ割り当て
- **Rust**: 所有権システム、ゼロコスト抽象化

#### 型変換

```go
// Go: 明示的変換が必要
body := string(content) // []byte → string
```

```rust
// Rust: read_to_stringが直接Stringを返す
// 変換不要、効率的
```

---

### 学習・実装の観点

#### 習得難易度

- **Go**: シンプル、明示的、学習コストは低い
- **Rust**: 型システムが複雑、学習コストは高いが安全性が高い

#### デバッグ容易性

- **Go**: エラーメッセージが分かりやすい
- **Rust**: コンパイル時にエラーを検出、実行時エラーが少ない

---

### まとめ

- **Go**: 実装が直感的で読みやすく、チーム開発に適している
- **Rust**: 型安全性が高く、パフォーマンスクリティカルなアプリケーションに適している
- 両方とも優秀なエラーハンドリング機能を持つが、アプローチが大きく異なる

---

### Related Notes

- [Go ファイル読み込みミニマム実装](./20250807123557.md)
- [Rust ファイル読み込みミニマム実装](./20250807123050.md)
