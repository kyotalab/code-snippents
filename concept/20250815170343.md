---
id: 20250815170343
title: 層別エラー設計パターン
type: concept
tags: [error-handling, layered-architecture, ddd, separation-of-concerns, go]
created: 2025-08-15 17:03:43
updated: 2025-08-15 17:09:18
---

## 層別エラー設計パターン

### Core Concept

各層は自身の責務に応じた固有のエラー型を持つべきである。

---

### 層別エラー責務

#### ドメイン層: ビジネスルール違反のみ

```go
type DomainError struct {
    Code    string
    Message string
    Field   string
}
```

#### アプリケーション層: ユースケース実行エラー

```go
type ApplicationError struct {
    Code    string
    Message string
    Cause   error // 下位層エラーのラップ
}
```

#### インフラ層: 外部リソースアクセスエラー

```go
type InfrastructureError struct {
    Type    InfraErrorType
    Message string
    Detail  string
    Cause   error
}
```

---

### 重要原則

エラーは上位層で適切にラップして伝播させる

---

### Related Notes

- [DDDにおける依存関係の方向性原則](./20250815165748.md)
- [エラーラッピング戦略](./20250815170936.md)
