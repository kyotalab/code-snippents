---
id: 20250815225735
title: エラーファースト設計の実践
type: concept
tags:
  [error-first-design, robust-design, tdd, error-handling, design-methodology]
created: 2025-08-15 22:57:35
updated: 2025-08-15 23:02:03
---

## エラーファースト設計の実践

### Core Concept

エラーケースを先に設計し、正常系を後から実装するアプローチ。

---

### 設計プロセス

#### 1. エラーケースの洗い出し

```go
// 先にエラーを定義
var (
    ErrEmptyTitle = DomainError{Code: "EMPTY_TITLE", Message: "タイトルは必須です"}
    ErrInvalidPriority = DomainError{Code: "INVALID_PRIORITY", Message: "無効な優先度です"}
)
```

#### 2. エラーハンドリングの実装

```go
func NewTodo(title string, priority Priority) (*Todo, error) {
    // エラーケースを先に処理
    if strings.TrimSpace(title) == "" {
        return nil, ErrEmptyTitle
    }
    if !priority.IsValid() {
        return nil, ErrInvalidPriority
    }

    // 正常系の実装
    return &Todo{Title: title, Priority: priority}, nil
}
```

#### 3. テストファーストでのエラー検証

```go
func TestNewTodo_EmptyTitle(t *testing.T) {
    _, err := NewTodo("", Priority("A"))
    assert.Equal(t, ErrEmptyTitle, err)
}
```

---

### 利点

- 堅牢性の向上
- エッジケースの考慮
- 予期しないエラーの削減

---

### Related Notes

- [ドメインエラーの設計原則](./20250815223433.md)
- [テスタブルな設計パターン](../pattern/20250815230214.md)
